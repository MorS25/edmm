---
version: edm_1_0

description: Reference Scenario 1

metadata:
  maintainer: Michael Wurster

components:
  order_app_ec2:
    type: cloud_service_aws_ec2
  order_app_ubuntu:
    type: compute
    relations:
      - hosted_on: order_app_ec2

###############################################
## Component Types
###############################################
component_types:

  base:
    extends: null
    description: The base type
    metadata: {}
    operations:
      create: ~
      configure: ~
      start: ~
      stop: ~
      delete: ~

  software_component:
    extends: base

  compute:
    extends: base
    properties:
      os_family:
        type: string
        description: Specifies the type of operating system
        default_value: linux
      machine_image:
        type: string
        description: The name of the machine image to use
      instance_type:
        type: string
        description: The name of the instance type to provision
      key_name:
        type: string
        description: The name of the key pair to use for authentication
      public_key:
        type: string
        description: The public key of the key pair to use for authentication

  cloud_service_aws:
    extends: base
    properties:
      aws_access_key:
        type: string
      aws_secret_access_key:
        type: string
      aws_region:
        type: string

  cloud_service_aws_ec2:
    extends: cloud_service_aws
    properties:
      vpc_security_group:
        type: string
      subnet:
        type: string

  web_server:
    extends: software_component
    properties:
      port:
        type: integer
        default_value: 80

  web_application:
    extends: base

###############################################
## Relation Types
###############################################
relation_types:

  depends_on:
    extends: null
    properties: {}
    operations:
      pre_configure_source: ~
      pre_configure_target: ~
      post_configure_source: ~
      post_configure_target: ~
      target_changed: ~
      target_removed: ~

  hosted_on:
    extends: depends_on

  connects_to:
    extends: depends_on
